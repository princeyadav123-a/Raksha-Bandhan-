<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Happy Raksha Bandhan!</title>
    <style>
        /* --- General Setup & Theming --- */
        :root {
            --bg-dark-1: #0f001f;
            --bg-dark-2: #1a0033;
            --neon-magenta: #ff00ff;
            --neon-cyan: #00ffff;
            --neon-gold: #ffd700;
            --neon-green: #39ff14;
            --whatsapp-green: #25D366;
            --text-light: #f0e6ff;
        }

        @keyframes zoomInOut {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes neonGlow {
            0%, 100% { text-shadow: 0 0 5px var(--neon-magenta), 0 0 10px var(--neon-magenta), 0 0 20px var(--neon-magenta); }
            50% { text-shadow: 0 0 10px var(--neon-cyan), 0 0 20px var(--neon-cyan), 0 0 30px var(--neon-cyan); }
        }
        
        @keyframes pulseGlow {
            0%, 100% { box-shadow: 0 0 10px 2px var(--neon-magenta), inset 0 0 5px 1px var(--neon-magenta); }
            50% { box-shadow: 0 0 20px 5px var(--neon-cyan), inset 0 0 10px 2px var(--neon-cyan); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--bg-dark-1);
            color: var(--text-light);
            overflow: hidden; /* No scrolling */
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* --- Landing Screen --- */
        #landing-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 100;
            background: linear-gradient(45deg, #ff00ff, #00ffff, #ffdd00, #ff00ff);
            background-size: 400% 400%;
            animation: gradientShift 10s ease infinite;
            transition: opacity 1s ease-in-out;
        }

        @keyframes gradientShift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        #landing-screen h1 {
            font-size: clamp(2rem, 6vw, 4rem);
            color: white;
            text-shadow: 2px 2px 8px rgba(0,0,0,0.7);
            text-align: center;
            padding: 0 20px;
            animation: zoomInOut 5s ease-in-out infinite;
        }

        #reveal-button {
            margin-top: 30px;
            padding: 15px 30px;
            font-size: clamp(1rem, 4vw, 1.5rem);
            font-weight: bold;
            color: white;
            background-color: rgba(0,0,0,0.3);
            border: 2px solid white;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 0 15px 5px rgba(255,255,255,0.5);
        }

        #reveal-button:hover {
            background-color: rgba(0,0,0,0.5);
            transform: scale(1.05);
            box-shadow: 0 0 25px 8px rgba(255,255,255,0.7);
        }

        /* --- Main Celebration Page --- */
        #celebration-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: linear-gradient(135deg, var(--bg-dark-1), var(--bg-dark-2));
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: space-around; /* Key for no-scroll layout */
            padding: 1rem;
            box-sizing: border-box;
            opacity: 0; /* Initially hidden */
            transition: opacity 1s ease-in-out;
        }

        #celebration-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1;
        }

        .content-section {
            position: relative;
            z-index: 2;
            text-align: center;
            width: 100%;
            max-width: 800px;
        }
        
        /* --- Top Section: Title & Rakhi --- */
        .top-section {
            margin-top: max(1vh, 10px);
        }

        .title-container {
            position: relative;
            display: inline-block;
            margin-bottom: 1vh;
        }

        .title-container::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 120%;
            height: 150%;
            background: linear-gradient(45deg, var(--neon-magenta), var(--neon-cyan));
            transform: translate(-50%, -50%);
            filter: blur(40px);
            opacity: 0.8;
            z-index: -1;
            animation: gradientShift 5s ease infinite;
        }
        
        #main-title {
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: bold;
            margin: 0;
            color: transparent;
            background: linear-gradient(45deg, var(--neon-cyan), white, var(--neon-gold), var(--neon-magenta));
            background-size: 400% 100%;
            -webkit-background-clip: text;
            background-clip: text;
            animation: discoLights 4s linear infinite, blink 2s infinite;
        }
        
        @keyframes discoLights {
            from { background-position: 0% 50%; }
            to { background-position: 400% 50%; }
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        #rakhi-image {
            width: clamp(150px, 40vw, 250px);
            max-width: 90%;
            border-radius: 15px;
            animation: pulseRakhi 4s ease-in-out infinite, gradientShadow 6s ease-in-out infinite;
        }
        
        @keyframes pulseRakhi {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.03); }
        }

        @keyframes gradientShadow {
            0%   { filter: drop-shadow(0 10px 15px hsla(300, 100%, 50%, 0.4)); }
            33%  { filter: drop-shadow(0 10px 15px hsla(180, 100%, 50%, 0.4)); }
            66%  { filter: drop-shadow(0 10px 15px hsla(50, 100%, 50%, 0.4)); }
            100% { filter: drop-shadow(0 10px 15px hsla(300, 100%, 50%, 0.4)); }
        }

        /* --- Middle Section: Greeting Message --- */
        .greeting-container {
            position: relative;
            background: rgba(0, 0, 0, 0.3);
            padding: 15px 25px;
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .greeting-container::before {
            content: '';
            position: absolute;
            inset: -2px;
            border-radius: 15px;
            background: linear-gradient(120deg, var(--neon-gold), var(--neon-green));
            z-index: -1;
            filter: blur(20px);
            opacity: 0.7;
            animation: gradientShift 6s ease infinite alternate;
        }

        #greeting-message {
            font-size: clamp(1.1rem, 3.5vw, 1.8rem);
            line-height: 1.5;
            margin: 0;
            color: var(--text-light);
            word-wrap: break-word;
        }

        #sender-name {
            font-weight: bold;
            animation: neonGlow 3s ease-in-out infinite, zoomInOut 6s ease-in-out infinite alternate;
            display: inline-block; /* for transform to work */
        }

        /* --- Bottom Section: Inputs & Sharing --- */
        .controls-section {
             margin-bottom: max(1vh, 10px);
        }
        .input-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }

        .input-field {
            width: 100%;
            max-width: 400px;
            padding: 12px;
            font-size: 1rem;
            background-color: rgba(0, 0, 0, 0.5);
            border: 2px solid var(--neon-cyan);
            border-radius: 10px;
            color: var(--text-light);
            box-shadow: 0 0 10px var(--neon-cyan);
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .input-field::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }

        .input-field:focus {
            outline: none;
            box-shadow: 0 0 20px var(--neon-magenta);
            border-color: var(--neon-magenta);
        }

        textarea.input-field {
            resize: none;
            height: 60px;
        }

        .buttons-group {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .btn {
            text-decoration: none;
            font-weight: bold;
            padding: 12px 25px;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .gift-button {
            background: linear-gradient(45deg, var(--neon-gold), #ff8c00);
            color: black;
            font-size: 1rem;
            animation: pulseGlow 4s infinite, bounce 2s infinite 2s;
            border: none;
        }
        .gift-button:hover {
            transform: scale(1.05);
        }

        .whatsapp-button {
            background-color: var(--whatsapp-green);
            color: white;
            font-size: 1rem;
            border: none;
        }
        .whatsapp-button:hover {
            box-shadow: 0 0 15px 2px var(--whatsapp-green);
            transform: scale(1.05);
        }

    </style>
</head>
<body>
    <!-- 1. Landing Screen -->
    <div id="landing-screen">
        <h1>Special Raksha Bandhan message waiting for you</h1>
        <button id="reveal-button">Click to Reveal</button>
    </div>

    <!-- 2. Main Celebration Page -->
    <div id="celebration-container">
        <!-- Canvas for all festive effects -->
        <canvas id="celebration-canvas"></canvas>

        <!-- Top Section: Title and Rakhi Image -->
        <div class="content-section top-section">
            <div class="title-container">
                <h1 id="main-title">Happy Raksha Bandhan</h1>
            </div>
            <!-- ## IMAGE PROBLEM FIX ## -->
            <!-- Make sure 'rakhi.gif' file is in the SAME FOLDER as this HTML file! -->
            <img id="rakhi-image" src="rakhi.gif" alt="Animated Rakhi">
        </div>

        <!-- Middle Section: Greeting Message -->
        <div class="content-section">
            <div class="greeting-container">
                <p id="greeting-message">
                    <!-- ## NAME CHANGE FIX ## (Default name in HTML is now Anshu) -->
                    <span id="sender-name">Anshu</span> ki taraf se: 
                    <span id="custom-message">aapko Raksha Bandhan ki bahut bahut badhai</span>
                </p>
            </div>
        </div>

        <!-- Bottom Section: Inputs and Sharing -->
        <div class="content-section controls-section">
            <div class="input-group">
                <input type="text" id="name-input" class="input-field" placeholder="Enter your name">
                <textarea id="message-input" class="input-field" placeholder="Type your message"></textarea>
            </div>
            <div class="buttons-group">
                <!-- 🔥🔥 PASTE YOUR AMAZON AFFILIATE LINK BELOW 🔥🔥 -->
                <a href="https://www.amazon.in/s?k=rakhi+gifts&_encoding=UTF8&tag=YOUR_TAG-21&linkCode=ur2&linkId=EXAMPLE&camp=3638&creative=24630" target="_blank" class="btn gift-button">🎁 Special Rakhi Gifts 🎁</a>
                
                <a id="whatsapp-share" href="#" class="btn whatsapp-button">
                    <svg xmlns="http://www.w3.org/2000/svg" height="20" width="20" viewBox="0 0 448 512" fill="white">
                        <path d="M380.9 97.1C339 55.1 283.2 32 223.9 32c-122.4 0-222 99.6-222 222 0 39.1 10.2 77.3 29.6 111L0 480l117.7-30.9c32.4 17.7 68.9 27 106.1 27h.1c122.3 0 224.1-99.6 224.1-222 0-59.3-25.2-115-67.1-157zm-157 341.6c-33.8 0-67.6-9.5-97.8-28.2l-6.7-4-69.8 18.3L72 359.2l-4.5-7c-18.9-29.7-28.9-63.3-28.9-98.2 0-101.7 82.8-184.5 184.6-184.5 49.3 0 95.6 19.2 130.4 54.1 34.8 34.9 56.2 81.2 56.1 130.5 0 101.8-84.9 184.6-186.6 184.6zm101.2-138.2c-5.5-2.8-32.8-16.2-37.9-18-5.1-1.9-8.8-2.8-12.5 2.8-3.7 5.6-14.3 18-17.6 21.8-3.2 3.7-6.5 4.2-12 1.4-32.8-16.3-54-29.1-75.5-66-5.7-9.8 5.7-9.1 16.3-30.3 1.8-3.7.9-6.9-.5-9.7-1.4-2.8-12.5-30.1-17.1-41.2-4.5-10.8-9.1-9.3-12.5-9.5-3.2-.2-6.9-.2-10.6-.2-3.7 0-9.7 1.4-14.8 6.9-5.1 5.6-19.4 19-19.4 46.3 0 27.3 19.9 53.7 22.6 57.4 2.8 3.7 39.1 59.7 94.8 83.8 35.2 15.2 49 16.5 66.6 13.9 10.7-1.6 32.8-13.4 37.4-26.4 4.6-13 4.6-24.1 3.2-26.4-1.3-2.5-5-3.9-10.5-6.6z"/>
                    </svg>
                    Share on WhatsApp
                </a>
            </div>
        </div>
    </div>
    
    <audio id="bg-music" src="rakhi.mp3" loop></audio>

    <script>
    document.addEventListener('DOMContentLoaded', () => {
        // --- DOM Element References ---
        const landingScreen = document.getElementById('landing-screen');
        const revealButton = document.getElementById('reveal-button');
        const celebrationContainer = document.getElementById('celebration-container');
        const bgMusic = document.getElementById('bg-music');
        const senderNameEl = document.getElementById('sender-name');
        const customMessageEl = document.getElementById('custom-message');
        const nameInput = document.getElementById('name-input');
        const messageInput = document.getElementById('message-input');
        const whatsappShareBtn = document.getElementById('whatsapp-share');
        const canvas = document.getElementById('celebration-canvas');
        const ctx = canvas.getContext('2d');
        let audioContext, analyser, source, dataArray;
        let particles = [];
        
        // --- ## NAME CHANGE FIX ## (Default name in Javascript is now Anshu) ---
        const urlParams = new URLSearchParams(window.location.search);
        const initialName = urlParams.get('name') || 'Anshu'; 
        const initialMessage = urlParams.get('msg') || 'aapko Raksha Bandhan ki bahut bahut badhai';
        
        // This single function updates everything: the greeting text and the share link
        function syncContentAndLinks() {
            const currentName = nameInput.value || 'Anshu';
            const currentMessage = messageInput.value || 'aapko Raksha Bandhan ki bahut bahut badhai';

            // Update the main greeting text
            senderNameEl.textContent = currentName;
            customMessageEl.textContent = currentMessage;

            // Update the WhatsApp share link
            const pageUrl = `${window.location.origin}${window.location.pathname}?name=${encodeURIComponent(currentName)}&msg=${encodeURIComponent(currentMessage)}`;
            const whatsappMsg = `*${currentName} ki taraf se:* 🎉\n\n${currentMessage}\n\nCheck out this special greeting:\n${pageUrl}`;
            whatsappShareBtn.href = `https://api.whatsapp.com/send?text=${encodeURIComponent(whatsappMsg)}`;
        }
        
        // --- Initial Setup on Page Load ---
        // 1. Set the values of the input boxes
        nameInput.value = initialName;
        messageInput.value = initialMessage;
        // 2. Sync the greeting text and share link for the first time
        syncContentAndLinks();
        
        // 3. Add listeners to update everything when user types
        nameInput.addEventListener('input', syncContentAndLinks);
        messageInput.addEventListener('input', syncContentAndLinks);

        // --- Reveal Button Logic ---
        revealButton.addEventListener('click', () => {
            landingScreen.style.opacity = '0';
            setTimeout(() => {
                landingScreen.style.display = 'none';
            }, 1000);
            
            celebrationContainer.style.opacity = '1';
            bgMusic.play().catch(e => console.error("Audio play failed:", e));
            setupAudioApi();
            animate();
        });

        // --- Audio API Initialization ---
        function setupAudioApi() {
            try {
                audioContext = new (window.AudioContext || window.webkitAudioContext)();
                analyser = audioContext.createAnalyser();
                source = audioContext.createMediaElementSource(bgMusic);
                source.connect(analyser);
                analyser.connect(audioContext.destination);
                analyser.fftSize = 64;
                const bufferLength = analyser.frequencyBinCount;
                dataArray = new Uint8Array(bufferLength);
            } catch(e) {
                console.error("Web Audio API not supported", e);
            }
        }
        
        // --- Canvas Animation Logic ---
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();
        
        const flowerEmojis = ['🌺', '🌸', '🌼', '🌻', '🌟', '💖'];
        const neonColors = ['#ff00ff', '#00ffff', '#ffd700', '#39ff14'];

        class Particle {
            constructor(x, y, type) {
                this.x = x; this.y = y; this.type = type;
                this.size = Math.random() * (type === 'balloon' ? 30 : 8) + 5;
                this.speedX = Math.random() * 4 - 2;
                this.speedY = type === 'balloon' ? Math.random() * -1 - 0.5 : Math.random() * 2 + 1;
                this.color = neonColors[Math.floor(Math.random() * neonColors.length)];
                this.emoji = flowerEmojis[Math.floor(Math.random() * flowerEmojis.length)];
                this.life = type === 'balloon' ? 200 + Math.random() * 100 : 100;
                this.rotation = Math.random() * Math.PI * 2;
                this.sway = Math.random() * Math.PI * 2;
            }
            update() {
                this.life--; this.x += this.speedX; this.y += this.speedY;
                if (this.type === 'flower') { this.x += Math.sin(this.sway) * 0.5; this.sway += 0.05; this.rotation += 0.02; }
                if (this.type === 'balloon') { this.speedY *= 0.99; }
            }
            draw() {
                ctx.save();
                ctx.globalAlpha = Math.max(0, this.life / 100);
                if (this.type === 'confetti') { ctx.fillStyle = this.color; ctx.fillRect(this.x, this.y, this.size, this.size); } 
                else if (this.type === 'flower') {
                    ctx.translate(this.x, this.y); ctx.rotate(this.rotation);
                    ctx.font = `${this.size * 2}px serif`; ctx.fillText(this.emoji, 0, 0);
                } else if (this.type === 'balloon') {
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    const gradient = ctx.createRadialGradient(this.x-this.size*0.2, this.y-this.size*0.2, 0, this.x, this.y, this.size);
                    gradient.addColorStop(0, this.color); gradient.addColorStop(1, 'transparent');
                    ctx.fillStyle = gradient; ctx.filter = `blur(2px) drop-shadow(0 0 5px ${this.color})`; ctx.fill();
                }
                ctx.restore();
            }
        }
        function handleParticles() {
            for (let i = particles.length - 1; i >= 0; i--) {
                particles[i].update(); particles[i].draw();
                if (particles[i].life < 0) particles.splice(i, 1);
            }
        }
        let frameCount = 0;
        function animate() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            frameCount++;
            if (analyser) {
                analyser.getByteFrequencyData(dataArray);
                let avg = dataArray.reduce((a, b) => a + b, 0) / dataArray.length;
                if (avg > 40) {
                    let burstAmount = Math.min(5, Math.floor(avg / 20));
                    for (let i = 0; i < burstAmount; i++) particles.push(new Particle(Math.random() * canvas.width, Math.random() * canvas.height, 'confetti'));
                }
            }
            if (frameCount % 20 === 0) particles.push(new Particle(Math.random() * canvas.width, -20, 'flower'));
            if (frameCount % 90 === 0) particles.push(new Particle(Math.random() * canvas.width, canvas.height + 20, 'balloon'));
            handleParticles();
            requestAnimationFrame(animate);
        }
    });
    </script>
</body>
</html>